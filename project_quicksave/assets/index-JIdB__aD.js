import{j as e,F as o,a as d,f as x,R as u,U as h,g as t,D as j}from"./index-BlRHAnrl.js";import{C as m,a as g,d as i,f,e as D,g as p,B as n,H as w}from"./Header-CWlfWYiv.js";import{M as v,S as l,o as y,p as C,q as L,r as b,s as c,t as N,w as A,x as I,y as T,z as M,B as E}from"./dropdown-menu-D571kpJN.js";function P({...r}){return e.jsxs("svg",{viewBox:"0 0 32 32",...r,children:[e.jsx("circle",{cx:16,cy:8,r:2}),e.jsx("circle",{cx:16,cy:16,r:2}),e.jsx("circle",{cx:16,cy:24,r:2})]})}function U({...r}){return e.jsx("svg",{viewBox:"0 0 32 32",...r,children:e.jsx("path",{d:"M17.414 16L24 9.414L22.586 8L16 14.586L9.414 8L8 9.414L14.586 16L8 22.586L9.414 24L16 17.414L22.586 24L24 22.586z"})})}function B({article:r}){return e.jsxs(m,{className:"grid overflow-hidden border-neutral-300/85 bg-neutral-50 shadow md:grid-flow-col md:grid-cols-[1fr_min-content_1fr] md:items-center",children:[r.imgUrl&&r.imgUrl instanceof Blob?e.jsx("img",{src:URL.createObjectURL(r.imgUrl),alt:"An image preview of the article."}):e.jsx("div",{className:"grid h-60 place-items-center bg-neutral-100",children:e.jsx(v,{className:"max-h-40 fill-neutral-200"})}),e.jsx(l,{orientation:"vertical",className:"-mr-2 hidden h-2/3 md:ml-4 md:block lg:-mr-0 lg:ml-6"}),e.jsxs("div",{children:[e.jsxs(g,{children:[e.jsx("div",{className:"mb-4 flex justify-end md:justify-start",children:e.jsx(i,{children:new Date(r.timestamp).toLocaleString()})}),r.title&&e.jsx(f,{className:"text-pretty",children:e.jsx("a",{href:r.url,children:r.title})})]}),e.jsx(D,{children:r.description&&e.jsx(i,{"aria-label":"Article Description",className:"w-[90%] text-pretty",children:r.description})}),e.jsxs(p,{className:"flex-col items-start",children:[r.title&&e.jsx(l,{}),e.jsx(i,{children:e.jsx("a",{href:r.url,children:r.url})})]})]})]})}function R({children:r}){return e.jsxs(y,{children:[r,e.jsxs(C,{children:[e.jsxs(L,{children:[e.jsx(b,{children:"Delete Article?"}),e.jsx(c,{children:"Are you sure you want to delete this article?"}),e.jsx(c,{children:"This action cannot be undone."})]}),e.jsx(o,{method:"POST",action:"delete",children:e.jsx(N,{children:e.jsx(n,{type:"submit",children:"Delete"})})})]})]})}function S({children:r}){return e.jsx(A,{asChild:!0,children:r})}function z(){const{article:r}=d(),s=x(),a=()=>{s(-1)};return e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx(n,{onPointerDown:a,type:"button",title:"Close article",children:e.jsx(U,{className:"h-full fill-neutral-50"})}),e.jsx(R,{children:e.jsxs(I,{children:[e.jsx(T,{asChild:!0,children:e.jsx(n,{type:"button",title:"Article options menu",children:e.jsx(P,{className:"h-full fill-neutral-50"})})}),e.jsx(M,{children:e.jsx(S,{children:e.jsx(E,{children:"Delete article"})})})]})})]}),e.jsx("div",{className:"w-full p-3 md:mx-auto md:max-w-[1024px]",children:e.jsx(B,{article:r})})]})}async function _({params:r}){if(!r.articleId)throw new Error("Expected an article ID parameter");const s=await u("articles",r.articleId);if(!s)throw new Error("Page does not exist");return s.read||await h("articles",s.id,{...s,read:!0}),{article:s}}async function k({params:r,request:s}){return s.method!=="POST"?t(".."):r.articleId===void 0?t("/"):await j("articles",r.articleId)?t("../.."):t("..")}export{z as ArticlePage,k as action,_ as loader};
